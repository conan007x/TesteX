-- Script para aumentar a velocidade ao pressionar X
-- Voltar ao normal ao soltar X

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- Aguardar novo personagem quando o atual morrer
LocalPlayer.CharacterAdded:Connect(function(NewCharacter)
    Character = NewCharacter
    Humanoid = NewCharacter:WaitForChild("Humanoid")
end)

-- Configurações
local normalSpeed = 16       -- Velocidade normal do personagem
local boostedSpeed = 22      -- Velocidade aumentada (ajuste este valor para ser sutil)
local originalSpeed = Humanoid.WalkSpeed -- Guardar velocidade original

-- Variáveis de controle
local speedBoosted = false
local keyPressed = false

-- Função para aplicar velocidade
local function setSpeed(speed)
    if Character and Humanoid then
        Humanoid.WalkSpeed = speed
    end
end

-- Detectar quando a tecla X é pressionada ou solta
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    -- Ignorar se a entrada está sendo processada pelo jogo (chat, etc)
    if gameProcessed then return end
    
    -- Verificar se a tecla X foi pressionada
    if input.KeyCode == Enum.KeyCode.X then
        keyPressed = true
        
        -- Guardar a velocidade atual caso seja diferente do padrão
        if not speedBoosted then
            originalSpeed = Humanoid.WalkSpeed
        end
        
        -- Ativar aumento de velocidade
        speedBoosted = true
        setSpeed(boostedSpeed)
    end
end)

UserInputService.InputEnded:Connect(function(input, gameProcessed)
    -- Verificar se a tecla X foi solta
    if input.KeyCode == Enum.KeyCode.X then
        keyPressed = false
        
        -- Desativar aumento de velocidade
        speedBoosted = false
        setSpeed(originalSpeed) -- Voltar à velocidade original
    end
end)

-- Loop de verificação de segurança (mantém o script funcionando mesmo se houver problemas)
RunService.Heartbeat:Connect(function()
    -- Verificar se o personagem morreu ou resetou
    if not Character or not Character:FindFirstChild("Humanoid") then
        Character = LocalPlayer.Character
        if Character then
            Humanoid = Character:FindFirstChild("Humanoid")
            if Humanoid and speedBoosted and keyPressed then
                setSpeed(boostedSpeed)
            end
        end
    end
    
    -- Verificar se a tecla ainda está pressionada
    if speedBoosted and not keyPressed then
        speedBoosted = false
        setSpeed(originalSpeed)
    end
end)

-- Notificação sutil de que o script foi ativado
local function notify(message)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Script Ativado",
        Text = message,
        Duration = 3
    })
end

notify("Pressione X para o boost de velocidade")

-- Retornar valor verdadeiro para confirmar que o script foi executado
return true
